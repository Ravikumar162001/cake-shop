<!DOCTYPE html>
<html lang="en" ng-app="cakeApp">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sweet Bites - Homemade Cakes</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="app.js"></script>

  <style>
    .auth-buttons-header {
      position: absolute;
      top: 20px;
      right: 20px;
    }

    .auth-buttons-header button {
      margin-left: 10px;
      padding: 8px 16px;
      background-color: #fff;
      color: #d2691e;
      border: 2px solid #d2691e;
      cursor: pointer;
      border-radius: 4px;
    }

    .auth-modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .auth-box {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .auth-tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
    }

    .auth-tabs button {
      flex: 1;
      padding: 10px;
      border: none;
      cursor: pointer;
      background: #f2f2f2;
    }

    .auth-tabs button.active {
      background: #d2691e;
      color: white;
    }

    .auth-box input {
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .auth-box button[type="submit"] {
      background: #d2691e;
      color: white;
      width: 100%;
      padding: 10px;
      border: none;
    }

    .auth-close {
      text-align: right;
      font-size: 20px;
      cursor: pointer;
    }

    .admin-dashboard {
      background: #fff8f0;
      margin: 30px auto;
      padding: 20px;
      max-width: 900px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .admin-dashboard table {
      width: 100%;
      margin-bottom: 30px;
      border-collapse: collapse;
    }

    .admin-dashboard th, .admin-dashboard td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }

    .admin-toggle {
      text-align: center;
      margin: 20px 0;
    }
  </style>
</head>

<body ng-controller="CakeController">

<header style="position: relative;">
  <h1>Sweet Bites</h1>
  <p>Fresh Homemade Cakes for Every Occasion</p>

  <!-- User Auth Buttons -->
  <div class="auth-buttons-header">
    <span ng-if="currentUser">Welcome, {{currentUser}}!</span>
    <button ng-if="!currentUser" ng-click="openAuthModal('login')">Login</button>
    <button ng-if="!currentUser" ng-click="openAuthModal('signup')">Sign Up</button>
    <button ng-if="currentUser" ng-click="logout()">Logout</button>
  </div>
</header>

<!-- Image Carousel -->
<section class="carousel">
  <img src="https://via.placeholder.com/800x300?text=Fresh+Homemade+Cakes" alt="Cake Banner">
</section>

<!-- Cake Listing -->
<section class="cakes">
  <div class="cake-card" ng-repeat="cake in cakes">
    <img ng-src="{{cake.image}}" alt="{{cake.name}}">
    <h2>{{cake.name}}</h2>
    <p>{{cake.description}}</p>
    <p class="price">₹{{cake.price}}</p>
    <button ng-click="orderCake(cake)">Order Now</button>
  </div>
</section>

<!-- Order Form -->
<section class="order-form">
  <h2>Place Your Order</h2>
  <form ng-submit="submitOrder()">
    <label>Name:</label>
    <input type="text" ng-model="order.name" required>

    <label>Phone Number:</label>
    <input type="text" ng-model="order.phone" required>

    <label>Address:</label>
    <textarea ng-model="order.address" required></textarea>

    <label>Select Cake:</label>
    <select ng-model="order.selectedCake" required>
      <option ng-repeat="cake in cakes" value="{{cake.name}}">{{cake.name}} - ₹{{cake.price}}</option>
    </select>

    <button type="submit">Submit Order</button>
  </form>
  <p ng-if="orderSuccess">{{orderSuccess}}</p>
</section>

<!-- Customer Reviews -->
<section class="reviews">
  <h2>Customer Reviews</h2>
  <div class="review-card" ng-repeat="review in reviews">
    <p>"{{review.message}}"</p>
    <p>- {{review.name}}</p>
  </div>
</section>

<!-- Contact Us Form -->
<section class="contact-form">
  <h2>Contact Us</h2>
  <form ng-submit="sendMessage()">
    <label>Your Name:</label>
    <input type="text" ng-model="contact.name" required>

    <label>Email:</label>
    <input type="email" ng-model="contact.email" required>

    <label>Message:</label>
    <textarea ng-model="contact.message" required></textarea>

    <button type="submit">Send Message</button>
  </form>
  <p ng-if="messageSuccess">{{messageSuccess}}</p>
</section>

<!-- Admin Toggle Button -->
<div class="admin-toggle" ng-if="currentUser === 'ravikumar162001@gmail.com'">
  <button ng-click="toggleAdminDashboard()">Toggle Admin Dashboard</button>
</div>

<!-- Admin Dashboard Section -->
<section class="admin-dashboard" ng-show="adminVisible && currentUser === 'ravikumar162001@gmail.com'">
  <h2>Admin Dashboard</h2>

  <h3>Orders</h3>
  <table>
    <tr>
      <th>Name</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Cake</th>
    </tr>
    <tr ng-repeat="order in allOrders">
      <td>{{order.name}}</td>
      <td>{{order.phone}}</td>
      <td>{{order.address}}</td>
      <td>{{order.selectedCake}}</td>
    </tr>
  </table>

  <h3>Contact Messages</h3>
  <table>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Message</th>
    </tr>
    <tr ng-repeat="msg in allMessages">
      <td>{{msg.name}}</td>
      <td>{{msg.email}}</td>
      <td>{{msg.message}}</td>
    </tr>
  </table>
</section>

<!-- Auth Modal -->
<div class="auth-modal" ng-show="authModalVisible">
  <div class="auth-box">
    <div class="auth-close" ng-click="authModalVisible = false">&times;</div>

    <div class="auth-tabs">
      <button ng-click="showAuthForm('login')" ng-class="{active: authMode==='login'}">Login</button>
      <button ng-click="showAuthForm('signup')" ng-class="{active: authMode==='signup'}">Sign Up</button>
    </div>

    <!-- Login Form -->
    <form ng-submit="loginUser()" ng-show="authMode === 'login'">
      <input type="email" ng-model="login.email" placeholder="Email" required>
      <input type="password" ng-model="login.password" placeholder="Password" required>
      <button type="submit">Login</button>
      <p ng-if="loginMessage">{{loginMessage}}</p>
    </form>

    <!-- Signup Form -->
    <form ng-submit="signupUser()" ng-show="authMode === 'signup'">
      <input type="text" ng-model="signup.name" placeholder="Name" required>
      <input type="email" ng-model="signup.email" placeholder="Email" required>
      <input type="password" ng-model="signup.password" placeholder="Password" required>
      <button type="submit">Sign Up</button>
      <p ng-if="signupMessage">{{signupMessage}}</p>
    </form>
  </div>
</div>

<footer>
  <p>&copy; 2025 Sweet Bites | Call us: +91 98765-43210</p>
</footer>

</body>
</html>
